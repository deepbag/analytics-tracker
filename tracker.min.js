(()=>{let e={serverUrl:"ws://localhost:9000",batchInterval:5e3},t,o=[],s=null,n=()=>{s?((t=new WebSocket(e.serverUrl)).onopen=()=>{console.log("[Analytics] Connected to server"),i()},t.onmessage=e=>{console.log("[Analytics] Server Response:",e.data)},t.onerror=e=>{console.error("[Analytics] WebSocket error:",e)},t.onclose=()=>{console.warn("[Analytics] Connection closed, retrying..."),setTimeout(n,3e3)}):console.warn("[Analytics] Website ID is required. Tracking is disabled.")},r=(e,n={})=>{s?(e={domain:window.location.hostname,url:window.location.href,timestamp:(new Date).toISOString(),referrer:document.referrer||null,eventType:e,properties:n,websiteId:s},o.push(e),console.log("ðŸ“© Queued Event:",JSON.stringify(e)),t&&t.readyState===WebSocket.OPEN&&(console.log("ðŸš€ Sending event immediately..."),i())):console.warn("[Analytics] Website ID is required. Event tracking is disabled.")},i=()=>{if(s&&0!==o.length&&t&&t.readyState===WebSocket.OPEN)try{t.send(JSON.stringify(o)),console.log("[Analytics] Sent:",o.length,"events"),o=[]}catch(e){console.error("[Analytics] Failed to send events:",e)}};setInterval(i,e.batchInterval),window.track=(e,n)=>r(e,n),window.trackWebsiteSession=e=>{e?(s=e,n(),r("session_start",{websiteId:e})):console.warn("[Analytics] Invalid website ID. Tracking is disabled.")}})();